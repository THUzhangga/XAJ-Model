## 新安江模型作业

### 张玍

### 问题描述

某流域，流域面积为537km2，1982年8月1日0时至8月2日24时有一场降雨(mm)，降雨 过程和蒸发皿蒸发过程分别见下表。

| 时间   | 2    | 4    | 6    | 8    | 10   | 12   | 14   | 16   | 18   | 20   | 22   | 24   |
| ------ | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 雨量   | 10   | 24.1 | 20.4 | 18.3 | 10.1 | 5.5  | 0.6  | 3.1  | 1.9  | 4.6  | 5    | 4.8  |
| 时间   | 2    | 4    | 6    | 8    | 10   | 12   | 14   | 16   | 18   | 20   | 22   | 24   |
| 雨量   | 36.2 | 29   | 6    | 3.6  | 0.4  | 0    | 0.5  | 3.8  | 0    | 1.8  | 0.2  | 0.3  |
| 时间   | 2    | 4    | 6    | 8    | 10   | 12   | 14   | 16   | 18   | 20   | 22   | 24   |
| 蒸发量 | 0.1  | 0    | 0.1  | 0.5  | 0.7  | 0.9  | 0.8  | 0.7  | 0.5  | 0.3  | 0.2  | 0.1  |
| 时间   | 2    | 4    | 6    | 8    | 10   | 12   | 14   | 16   | 18   | 20   | 22   | 24   |
| 蒸发量 | 0    | 0    | 0.1  | 0.6  | 0.8  | 1    | 0.9  | 0.8  | 0.7  | 0.5  | 0.3  | 0.1  |

### 代码描述

本程序基于C++语言编写，包括

* 脚本：`XAJModel.h`，`XAJModel.cpp`， `main.cpp`

* 输入文件：input.txt（每一行为降雨和蒸发皿蒸发量），par.txt

* 输出文件：output.txt

下面分别概述。

在`XAJModel.h`中创建`XAJ`类，在其中实现新安江模型：

* `private`成员为模型参数，包括四类参数。
* `public`成员为模型参数及模型函数，包括：
  * `XAJ(void)`：构造函数
  * `~XAJ(void)`：析构函数
  * `Initialize(long steps, float Area, int deltaT, int IsRouting, char *inputfile, float WU0, float WL0, float WD0, float FR0, float S0, float QRSS0, float QRG0)`：模型初始化，定义步长、面积、时段长、输入文件、部分参量初始状态
  * `SetParameters(float *Parameters, float *UH)`：设置模型参数
  * `void RunModel(void)`：运行模型。
  * `void Routing`：汇流计算
  * `void Saveoutput(char *output)`：保存结果

`XAJ`类的函数的具体实现在`XAJModel.cpp`中。

### 计算模块

蒸散发计算：

![1572057798755](../../fig/1572057798755.png)

子流域产流量计算、分水源计算、汇流计算。

### 计算结果

![1572073688846](../../fig/1572073688846.png)

